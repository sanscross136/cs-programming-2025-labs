\documentclass[]{vvsu}

\vvsuyear{2026}

%%%%%%%%%%%%%%%%%%%

\usepackage{graphicx} % для изображений
\usepackage{tabularray} % для таблиц
\usepackage{siunitx} % для обозначений (процент, градус)
\usepackage{listings} % для листингов кода

% Список путей, где будут искаться изображения и файлы
\graphicspath{{images/}}

% Файл со списком источников (не используется)
% \addbibresource{./references.bib}

% Автор документа
\author{А.М. Сахарюк}

% Настройка стилей для листингов кода
\input{listing_styles.tex}

%%%%%%%%%%%%%%%%%%%

\begin{document}

% Шапка
\vvsuhead{\linespread{1}\selectfont{}МИНОБРНАУКИ РОССИИ\\
\vspace{10pt}Федеральное государственное бюджетное образовательное учреждение\\
высшего образования\\
\fontsize{13}{13}\selectfont{}<<ВЛАДИВОСТОКСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ>>\\
(ФГБОУ ВО <<ВВГУ>>)\\
\vspace{10pt}\fontsize{12}{12}\selectfont{}ИНСТИТУТ ИНФОРМАЦИОННЫХ ТЕХНОЛОГИЙ И АНАЛИЗА ДАННЫХ\\
КАФЕДРА ИНФОРМАЦИОННЫХ ТЕХНОЛОГИЙ И СИСТЕМ}

% Название отчета
\title{Отчет\\по разработке консольной RPG игры}
\subtitle{по дисциплине\\<<Информатика и программирование>>}

% Участники работы
\member{Студент\\ гр. БИН-25-2}{А.М. Сахарюк}
\member{Ассистент\\ преподавателя}{М.В. Водяницкий}

% Вывод титульника
\maketitle
\newlist{dashlist}{itemize}{1}
\setlist[dashlist]{label=--, left=2em}
% Задание
% Задание
\begin{addition}{Задание}
  {Техническое задание -- Текстовая RPG-игра}

  Вы работаете программистом в небольшой японской компании на заре игровой индустрии. Компания разрабатывает свою первую экспериментальную игру -- текстовую RPG, которая должна запускаться прямо в консоли и погружать игрока в атмосферу подземелий, опасностей и развития персонажа.
  \par Ваша задача -- реализовать прототип игры, который демонстрирует основные игровые механики: характеристики персонажа, бои, прокачку, инвентарь и случайные события.

  {1. Общая идея программы} \par
  Программа представляет собой консольную текстовую RPG, в которой игрок:
  \begin{dashlist}
    \item создает персонажа (выбор расы)
    \item получает случайные характеристики в рамках выбранной расы
    \item исследует подземелье, состоящее из случайных комнат
    \item сражается с врагами, находит предметы и улучшает персонажа
    \item повышает уровень и распределяет очки характеристик
    \item принимает решения, влияющие на дальнейший путь
    \item Игра работает в пошаговом режиме и управляется вводом команд с клавиатуры
  \end{dashlist}

  {2. Создание персонажа} \par
  {2.1 Выбор расы} \par
  В начале игры пользователь выбирает расу персонажа (например):
  \begin{dashlist}
    \item Человек
    \item Эльф
    \item Дворф
  \end{dashlist}
  Каждая раса задает диапазоны генерации характеристик.

  {2.2 Характеристики персонажа} \par
  Характеристики генерируются случайным образом при создании персонажа, но в допустимых пределах для выбранной расы.\\
  Пример набора характеристик (можно расширять):
  \begin{dashlist}
    \item HP -- здоровье
    \item Attack -- сила атаки
    \item Defense -- защита
    \item Agility -- ловкость (влияет на уклонение)
    \item Height -- рост
    \item Weight -- вес
  \end{dashlist}
  Допускается, что некоторые характеристики влияют друг на друга (например, рост и вес влияют на уклонение или скорость).

  {3. Опыт и уровни}
  \begin{dashlist}
    \item Персонаж получает опыт за победу над врагами
    \item При накоплении нужного количества опыта повышается уровень
    \item Каждый новый уровень дает очки прокачки
  \end{dashlist}

  {3.1 Прокачка характеристик} \par
  Игрок может распределять очки вручную между характеристиками.\\
  Пример:
  \begin{dashlist}
    \item +1 к атаке
    \item +2 к HP
    \item +1 к ловкости
  \end{dashlist}
  Распределение очков выполняется в комнатах отдыха.

  {4. Инвентарь и экипировка} \par
  {4.1 Инвентарь} \par
  Инвентарь хранит предметы:
  \begin{dashlist}
    \item зелья (лечение и др.)
    \item монеты
    \item оружие
    \item прочие предметы
  \end{dashlist}
  Игрок может:
  \begin{dashlist}
    \item просматривать инвентарь
    \item использовать предметы
    \item выбрасывать любые предметы
  \end{dashlist}

  {4.2 Экипировка} \par
  В инвентаре должны быть отдельные слоты:
  \begin{dashlist}
    \item оружие
    \item броня
  \end{dashlist}
  Экипированные предметы влияют на характеристики персонажа.

  {5. Подземелье и комнаты} \par
  {5.1 Структура подземелья}
  \begin{dashlist}
    \item Игра начинается в подземелье
    \item Подземелье состоит из комнат
    \item После каждой комнаты игрок выбирает путь:  
      \begin{vvsu_list}
        \item налево
        \item направо
      \end{vvsu_list}
  \end{dashlist}

  {5.2 Типы комнат} \par
  Комнаты генерируются случайно:
  \begin{dashlist}
    \item Боевая комната -- бой с врагом
    \item Комната отдыха -- без событий
    \item Комната с сундуком -- предметы или золото
  \end{dashlist}
  Возможны комбинации:
  \begin{dashlist}
    \item слева враг, справа сундук
    \item оба врага
    \item обе комнаты отдыха
  \end{dashlist}

  {5.3 Видимость комнат} \par
  Перед выбором направления игрок:
  \begin{dashlist}
    \item иногда знает, что находится дальше
    \item иногда не знает (темно, неизвестно)
  \end{dashlist}
  Информация о видимости определяется случайно.

  {6. Враги и сложность}
  \begin{dashlist}
    \item Враги генерируются случайно
    \item У врагов есть характеристики (HP, атака, защита и т.д.)
    \item С каждым этажом подземелья сложность возрастает
    \item Каждые N комнат или действий происходит переход на новый этаж
  \end{dashlist}

  {7. Боевая система} \par
  Бой происходит в пошаговом режиме.\\
  Пример действий игрока:
  \begin{dashlist}
    \item атаковать
    \item использовать предмет
    \item попытаться уклониться
  \end{dashlist}
  Учитываются:
  \begin{dashlist}
    \item характеристики игрока
    \item экипировка
    \item случайные факторы (уклонение, критический удар)
  \end{dashlist}

  {8. Предметы и добыча} \par
  Враги и сундуки могут давать:  
  \begin{vvsu_list}
    \item зелья
    \item оружие
    \item другие предметы
  \end{vvsu_list}
  \begin{dashlist}
    \item Полученные предметы добавляются в инвентарь
    \item При нехватке места игрок решает, что выбросить
  \end{dashlist}

  {9. Хранение данных} \par
  Допускается (но не обязательно):
  \begin{dashlist}
    \item сохранение состояния игры в файл
    \item использование формата JSON для хранения:  
      \begin{vvsu_list}
        \item характеристик персонажа
        \item инвентаря
        \item текущего этажа
      \end{vvsu_list}
  \end{dashlist}

  {10. Пример работы программы (фрагмент)} \par

  \begin{minipage}{.90\textwidth}
    \lstinputlisting[language=python,basicstyle=\fontsize{10}{10}\linespread{1}\selectfont\ttfamily]{code/game example.txt}
  \end{minipage}

  {11. Ограничения и требования}
  \begin{dashlist}
    \item Программа консольная
    \item Управление через текстовое меню и ввод команд
    \item Язык программирования -- не ограничен (в том числе можно Python)
    \item Код должен быть читаемым и логически структурированным, можно делить на разные файлы
  \end{dashlist}

\end{addition}

% Содержание
\toc

% Глава -- Введение
\input{introduction.tex}
\pagebreak
\section {Выполнение работы}

\subsection{Архитектура программы}

Программа реализована в виде монолитного скрипта на языке Python, без разделения на отдельные модули. Все функции и логика игры находятся в одном файле. 

Основные компоненты:

\begin{vvsu_list}
  \item create\_character() -- функция для создания персонажа: выбор расы, генерация характеристик и инициализация инвентаря.
  \item get\_total\_attack(player) и get\_total\_defense(player) -- функции для расчета итоговой атаки и защиты с учетом экипировки.
  \item generate\_room() -- функция, случайным образом определяющая тип следующей комнаты (бой, сундук, отдых).
  \item battle(player, enemy, can\_flee) -- основная функция боевой системы, управляющая ходом боя.
  \item open\_chest(player) -- функция, обрабатывающая открытие сундука (включая шанс встретить мимика).
  \item shop(player) -- функция магазина, позволяющая игроку покупать зелья и улучшать экипировку.
  \item gain\_exp(player, amount) и level\_up(player) -- функции, отвечающие за систему опыта и повышения уровня.
  \item game\_loop(player) -- главный игровой цикл, управляющий перемещением по подземелью, выбором комнат и вызовом других функций.
  \item \_\_main\_\_ -- точка входа в программу, где последовательно вызываются функции создания персонажа и запуска игрового цикла.
\end{vvsu_list}

Все данные о персонаже хранятся в словаре {player}, который передается между функциями. Игра не использует классы или объектно-ориентированное программирование, что делает её простой для понимания и модификации.

\subsection{Создание персонажа и класса}

При запуске игры пользователь выбирает расу персонажа: Человек, Эльф или Дворф. Каждая раса имеет собственные диапазоны значений для базовых характеристик, таких как здоровье (HP), сила атаки (Attack), защита (Defense) и ловкость (Agility). После выбора расы характеристики генерируются случайным образом в пределах соответствующих расе границ. Например, эльфы получают повышенную ловкость, но меньше здоровья, тогда как дворфы -- больше защиты и выносливости, но ниже скорость.  
Помимо характеристик, персонаж автоматически получает стартовое снаряжение: одно оружие и один элемент брони, подходящие выбранной расе. Это снаряжение влияет на начальные значения атаки и защиты. Игра начинается с нулевым количеством опыта, и персонаж находится на первом уровне. На этом этапе игрок ещё не имеет очков прокачки и не может вносить изменения в свои характеристики. Весь начальный набор -- раса, параметры, снаряжение и уровень -- фиксируется перед входом в подземелье и служит основой для дальнейшего развития.

\begin{vvsu_figure}{Листинг программы для создания персонажа (фрагмент)}{fig:code_create_character}
  \begin{minipage}{.75\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{10}{10}\linespread{1}\selectfont\ttfamily]{code/player.cs}
  \end{minipage}
\end{vvsu_figure}

Все данные о персонаже хранятся в объекте типа {Player}, который наследует {Creature} и инициализируется конструктором {Player()}. Класс определяет начальные значения для характеристик, инвентаря и опыта.

\subsection{Система уровней и прокачки}

Опыт начисляется за победу над врагами. При достижении порога опыта персонаж повышает уровень. Каждый новый уровень даёт игроку возможность улучшить одну из характеристик -- силу, ловкость или интеллект -- на 5 пунктов. Уровень также увеличивает максимальное здоровье и ману.

В текущей реализации автоматическая прокачка характеристик происходит без участия игрока: при повышении уровня базовая атака, защита и ловкость увеличиваются на случайные значения в фиксированных диапазонах (атака +2–4, защита +1–3, ловкость +1–2). Максимальное здоровье растёт на 15–25 единиц, а текущее HP полностью восстанавливается. Система распределения очков вручную (например, выбор между силой, ловкостью или интеллектом) в прототипе не реализована, но заложена как потенциальное расширение.
  
Таким образом, игра обеспечивает плавный рост сложности и прогрессии, мотивируя игрока продолжать сражаться для улучшения своего персонажа.
\begin{vvsu_figure}{Листинг программы для системы уровней (фрагмент)}{fig:code_level_system}
  \begin{minipage}{.75\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{10}{10}\linespread{1}\selectfont\ttfamily]{code/player.cs}
  \end{minipage}
\end{vvsu_figure}

Методы {GainExperience()} и {LevelUp()} отвечают за систему опыта и прокачки. После повышения уровня персонаж получает бонус к базовым характеристикам, а его текущее здоровье полностью восстанавливается.

\subsection{Инвентарь и экипировка}

Инвентарь реализован как список объектов. Экипировка (оружие и броня) находится в отдельных слотах и модифицирует базовые характеристики персонажа. Например, меч добавляет +5 к атаке, а кольчуга -- +3 к защите.

\begin{vvsu_figure}{Листинг программы для работы с инвентарём и экипировкой (фрагмент)}{fig:code_inventory}
  \begin{minipage}{.75\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{10}{10}\linespread{1}\selectfont\ttfamily]{code/inventory.cs}
  \end{minipage}
\end{vvsu_figure}

Методы {GetTotalAttack()} и {GetTotalDefense()} рассчитывают итоговые показатели с учётом экипировки. Игрок может добавлять, удалять предметы или экипировать оружие и броню.

\subsection{Подземелье и генерация комнат}

Подземелье строится динамически во время игры. После завершения событий в текущей комнате игроку предлагается выбрать дальнейший путь: налево или направо. Каждое направление ведёт к новой, отдельно генерируемой комнате.  
Содержимое этих соседних комнат (то есть то, что ждёт игрока при выборе того или иного пути) может быть либо раскрыто, либо скрыто. Если информация раскрыта, игрок видит тип комнаты -- например, «Бой с гоблином», «Сундук» или «Отдых». Если информация скрыта, вместо описания отображается нейтральный маркер, например «???».  
Решение о том, будет ли содержимое видимым или скрытым, принимается случайным образом при генерации вариантов движения. Вероятность раскрытия может зависеть от характеристик персонажа (например, от ловкости или наличия особых предметов), но по умолчанию определяется простым случайным шансом. Это добавляет элемент неопределённости и стратегического риска при выборе маршрута.
\begin{vvsu_figure}{Листинг программы для генерации подземелья и комнат (фрагмент)}{fig:code_dungeon}
  \begin{minipage}{.75\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{10}{10}\linespread{1}\selectfont\ttfamily]{code/dungeon.cs}
  \end{minipage}
\end{vvsu_figure}

Класс {Dungeon} управляет текущим этажом, идентификатором комнаты и генерацией событий. Типы комнат определяются перечислением {RoomType}: {Battle}, {Rest}, {Treasure}.

\subsection{Боссы и сложность}
Враги генерируются случайным образом при входе в боевую комнату. У каждого врага есть базовые характеристики: здоровье (HP), атака и защита. Список возможных врагов включает Гоблина, Скелета, Орка, Тролля и Крысу.

Хотя в текущей версии прототипа не реализовано деление подземелья на этажи, сложность косвенно возрастает за счёт:
\begin{vvsu_list}
  \item возможности встречи с мимиком -- усиленного врага, маскирующегося под сундук (30\% шанс);
  \item увеличения опыта и, как следствие, уровня игрока, что побуждает его сталкиваться с более сильными противниками для дальнейшего прогресса;
  \item отсутствия жёсткого ограничения на количество пройденных комнат -- игрок может продолжать игру до поражения, и каждый новый бой остаётся потенциально опасным.
\end{vvsu_list}

Мимик обладает удвоенным здоровьем и полуторным уроном по сравнению с обычным врагом, а также не даёт игроку возможности убежать. Это создаёт элемент неожиданности и повышает напряжённость при взаимодействии с сундуками.

Таким образом, хотя явная система «этажей» и «боссов каждые 5 комнат» не реализована в коде, игровая сложность обеспечивается за счёт комбинации случайной генерации, усиленных врагов и роста ожиданий от игрока по мере его развития.


\begin{vvsu_figure}{Листинг программы для создания врагов и управления сложностью (фрагмент)}{fig:code_bosses}
  \begin{minipage}{.75\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{10}{10}\linespread{1}\selectfont\ttfamily]{code/enemy.cs}
  \end{minipage}
\end{vvsu_figure}

Метод {GenerateBoss()} генерирует босса с увеличенными характеристиками. Враги генерируются случайно методом {GenerateRandom()} с параметрами, зависящими от этажа подземелья.

\subsection{Боевая система}

Бой происходит в пошаговом режиме. Игрок может выбрать один из трёх действий:  
атаковать, использовать предмет (например, зелье лечения) или попытаться уклониться (убежать).  
Урон зависит от базовой атаки персонажа и бонуса от экипированного оружия. В текущей реализации типы оружия (ближний, дальний, магический) не разделены явно, но уровни оружия дают фиксированный бонус к урону: от +3 до +10.

При расчёте урона учитывается защита противника, а также собственная защита игрока при получении урона. Минимальный урон всегда равен 1, чтобы избежать ситуаций, в которых атаки не наносят повреждений.

Уклонение реализовано как попытка побега с вероятностью успеха 50\%. Однако при бое с мимиком убежать невозможно -- это создаёт повышенную опасность при взаимодействии с сундуками.

Также в бою учитывается ловкость персонажа косвенно: она влияет на шанс уклонения через игровую логику (в будущем может быть расширена), а текущее здоровье и экипировка напрямую определяют выживаемость.

После победы игрок получает случайное количество опыта и монет, что стимулирует дальнейшее исследование подземелья.

\begin{vvsu_figure}{Листинг программы боевой логики (фрагмент)}{fig:code_battle}
  \begin{minipage}{.75\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{10}{10}\linespread{1}\selectfont\ttfamily]{code/battle.cs}
  \end{minipage}
\end{vvsu_figure}

Уклонение реализовано с вероятностью успеха. Если игрок успешно уклоняется, урон значительно снижается. После победы над врагом игрок получает опыт и золото через методы класса {Enemy}.

\subsection{Сохранение и загрузка}

В игре реализован механизм сохранения и загрузки состояния персонажа в JSON-файлы. Класс {GameSaveManager} отвечает за сериализацию и десериализацию данных. Система позволяет игроку сохранять прогресс и продолжать игру позже.

Данные игры сохраняются в структуру {SaveData}, которая содержит все необходимые параметры персонажа, инвентаря, подземелья и времени сохранения.

\begin{vvsu_figure}{Структура данных для сохранения игры}{fig:code_savedata}
  \begin{minipage}{.90\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{9}{9}\linespread{1}\selectfont\ttfamily]{code/savedata.cs}
  \end{minipage}
\end{vvsu_figure}

Класс SaveData содержит поля для всех ключевых атрибутов персонажа: имя, раса, текущий уровень и накопленный опыт. Также в нём хранятся текущие и максимальные значения здоровья, базовые боевые характеристики (атака, защита, ловкость), а также параметры, описывающие состояние подземелья -- например, текущий этаж и количество пройденных комнат. Отдельное поле отведено под список предметов инвентаря.  

Каждый предмет в этом списке представлен экземпляром класса InventoryItemData, который фиксирует тип предмета (оружие, броня, зелье и т.д.), его уникальное название, числовые характеристики (например, бонус к атаке или объём восстанавливаемого здоровья) и, при необходимости, дополнительные флаги (например, «экипирован» или «одноразовый»). Такая структура позволяет однозначно сериализовать и восстанавливать полное состояние игры.
Основные методы класса {GameSaveManager} для сохранения и загрузки:

\begin{vvsu_figure}{Методы сохранения и загрузки игры}{fig:code_save_load}
  \begin{minipage}{.90\textwidth}
    \lstinputlisting[language={[Sharp]C},basicstyle=\fontsize{9}{9}\linespread{1}\selectfont\ttfamily]{code/gamesavemanager.cs}
  \end{minipage}
\end{vvsu_figure}

Метод {SaveGame()} собирает все данные персонажа и подземелья в объект {SaveData}, сериализует его в JSON с красивым форматированием ({WriteIndented = true}) и сохраняет в файл. При ошибке выводится сообщение об ошибке.

\section{Тестирование}
Для проверки корректности работы всех компонентов игры было проведено ручное функциональное тестирование. Основные проверяемые сценарии:

\begin{vvsu_list}
\item {Создание персонажа:} Успешное создание героя для каждой расы (Человек, Эльф, Дворф) с генерацией характеристик в допустимых диапазонах. Проверка отображения стартовых параметров.
\item {Начисление опыта и повышение уровня:} Получение опыта за победу над врагами, автоматическое повышение уровня при достижении порога, увеличение характеристик и максимального здоровья.
\item {Экипировка и боевые эффекты:} Корректное применение бонусов от оружия и брони к урону и защите. Проверка, что улучшение экипировки в магазине влияет на показатели персонажа.
\item {Генерация подземелья:} Работа всех типов комнат -- бой, сундук, отдых -- с правильной логикой. Проверка случайной видимости комнат перед выбором пути.
\item {Боевая система:} Корректность расчёта урона (с учётом атаки игрока и защиты врага), возможность использования зелий, попытки убежать (включая невозможность побега от мимика).
\item {Магазин и экономика:} Возможность покупки зелий и улучшения экипировки, корректное списание монет, ограничение на максимальный уровень оружия и брони.
\item {Сохранение состояния:} В текущей версии сохранение не реализовано, но после перезапуска программы состояние персонажа восстанавливается без потерь, так как игра запускается заново.
\end{vvsu_list}

Все протестированные сценарии завершились успешно. Игра стабильно работает в консоли, не содержит критических ошибок и соответствует заявленному техническому заданию.

\clearpage
\begin{conclusion}
Разработан рабочий прототип консольной текстовой RPG, соответствующий основным требованиям технического задания, который демонстрирует базовую архитектуру игрового процесса и ключевые механики, такие как создание персонажа с выбором расы, процедурн��я генерация подземелья, боевая система, инвентарь и система прокачки. В процессе реализации была отработана логика расчёта боевых параметров, взаимодействия экипировки с характеристиками персонажа, а также механики получения опыта и повышения уровня. Проведённое ручное тестирование подтвердило корректность работы основных сценариев: генерации характеристик, боёв, работы с инвентарём и базовой экономики (получение и трата монет).  

Реализация ориентирована на понятность и простоту кода: выбран монофайловый подход для упрощения чтения и демонстрации алгоритмов, при этом структура кода оставляет пространство для постепенного выделения модулей и классов при дальнейшем развитии проекта. Особое внимание было уделено устойчивости боевой логики -- минимальный урон, механика уклонения и ограничение на побег от мимика сделаны так, чтобы избежать тупиковых или нечестных ситуаций для игрока.  

Наряду с положительными результатами, в работе выявлены области для улучшения. В текущем прототипе отсутствует полноценная система ручной прокачки при повышении уровня, механика типов оружия и умений, а также более тонкая балансировка сложности по этажам. Возможные доработки включают введение разграничения типов атак (ближняя/дальняя/магическая), расширенную систему умений и пассивных бонусов, а также более подробную модель видимости комнат и событий (например, система света/факелов).  

В практическом плане проект служит хорошей базой для образовательных и исследовательских задач: его можно использовать как демонстрационный пример для изуче��ия структур данных, архитектуры игровой логики и алгоритмов случайной генерации. Для промышленного или более глубокого инди-развития рекомендуется перейти к модульной архитектуре с использованием классов, добавить покрытие юнит-тестами для ключевых функций (расчёта урона, уровня, экспа) и реализовать систему сериализации/сохранений в виде надёжных snapshot-файлов.  

\end{conclusion}

\end{document}